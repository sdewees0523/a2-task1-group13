---
title: "Salmon Time Series"
author: "Carlos Simms"
date: "2/2/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE)
library(tidyverse)
library(lubridate)
library(here)
library(tsibble)
library(feasts)
library(slider)
library(gghighlight)
library(patchwork)
library(janitor)
```

### Tab 3: Annual Counts By Species

```{r}
salmon <- read.csv(here("data", 
                        "willamette_fish_passage.csv"))

salmon_ts <- salmon %>% 
  mutate(Date = mdy(Date)) %>% 
  as_tsibble(key = NULL, 
             index = Date) %>% 
  pivot_longer(cols = 3:15, 
               names_to = "species", 
               values_to = "count") %>% 
  filter(species %in% c("Coho", 
                        "Jack.Coho", 
                        "Steelhead")) %>% 
  replace_na(list(count = 0))

clean_names() %>% 
  mutate(date = mdy(date), 
         year = year(date)) %>% 
  select(year, 
         coho, 
         jack_coho, 
         steelhead) %>% 
  replace_na(list(count = 0)) %>% 
  group_by(year)
```


























